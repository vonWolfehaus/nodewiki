{"version":3,"file":"lib.js","names":[],"mappings":"","sources":["lib.js"],"sourcesContent":[";\n/**\n * humane.js\n * Humanized Messages for Notifications\n * @author Marc Harter (@wavded)\n * @example\n *   humane.log('hello world');\n * @license MIT\n * See more usage examples at: http://wavded.github.com/humane-js/\n */\n!function(name,context,definition){if(typeof module!==\"undefined\")module.exports=definition(name,context);else if(typeof define===\"function\"&&typeof define.amd===\"object\")define(definition);else context[name]=definition(name,context)}(\"humane\",this,function(name,context){var win=window;var doc=document;var ENV={on:function(el,type,cb){\"addEventListener\"in win?el.addEventListener(type,cb,false):el.attachEvent(\"on\"+type,cb)},off:function(el,type,cb){\"removeEventListener\"in win?el.removeEventListener(type,cb,false):el.detachEvent(\"on\"+type,cb)},bind:function(fn,ctx){return function(){fn.apply(ctx,arguments)}},isArray:Array.isArray||function(obj){return Object.prototype.toString.call(obj)===\"[object Array]\"},config:function(preferred,fallback){return preferred!=null?preferred:fallback},transSupport:false,useFilter:/msie [678]/i.test(navigator.userAgent),_checkTransition:function(){var el=doc.createElement(\"div\");var vendors={webkit:\"webkit\",Moz:\"\",O:\"o\",ms:\"MS\"};for(var vendor in vendors)if(vendor+\"Transition\"in el.style){this.vendorPrefix=vendors[vendor];this.transSupport=true}}};ENV._checkTransition();var Humane=function(o){o||(o={});this.queue=[];this.baseCls=o.baseCls||\"humane\";this.addnCls=o.addnCls||\"\";this.timeout=\"timeout\"in o?o.timeout:2500;this.waitForMove=o.waitForMove||false;this.clickToClose=o.clickToClose||false;this.timeoutAfterMove=o.timeoutAfterMove||false;this.container=o.container;try{this._setupEl()}catch(e){ENV.on(win,\"load\",ENV.bind(this._setupEl,this))}};Humane.prototype={constructor:Humane,_setupEl:function(){var el=doc.createElement(\"div\");el.style.display=\"none\";if(!this.container){if(doc.body)this.container=doc.body;else throw\"document.body is null\"}this.container.appendChild(el);this.el=el;this.removeEvent=ENV.bind(function(){var timeoutAfterMove=ENV.config(this.currentMsg.timeoutAfterMove,this.timeoutAfterMove);if(!timeoutAfterMove){this.remove()}else{setTimeout(ENV.bind(this.remove,this),timeoutAfterMove)}},this);this.transEvent=ENV.bind(this._afterAnimation,this);this._run()},_afterTimeout:function(){if(!ENV.config(this.currentMsg.waitForMove,this.waitForMove))this.remove();else if(!this.removeEventsSet){ENV.on(doc.body,\"mousemove\",this.removeEvent);ENV.on(doc.body,\"click\",this.removeEvent);ENV.on(doc.body,\"keypress\",this.removeEvent);ENV.on(doc.body,\"touchstart\",this.removeEvent);this.removeEventsSet=true}},_run:function(){if(this._animating||!this.queue.length||!this.el)return;this._animating=true;if(this.currentTimer){clearTimeout(this.currentTimer);this.currentTimer=null}var msg=this.queue.shift();var clickToClose=ENV.config(msg.clickToClose,this.clickToClose);if(clickToClose){ENV.on(this.el,\"click\",this.removeEvent);ENV.on(this.el,\"touchstart\",this.removeEvent)}var timeout=ENV.config(msg.timeout,this.timeout);if(timeout>0)this.currentTimer=setTimeout(ENV.bind(this._afterTimeout,this),timeout);if(ENV.isArray(msg.html))msg.html=\"<ul><li>\"+msg.html.join(\"<li>\")+\"</ul>\";this.el.innerHTML=msg.html;this.currentMsg=msg;this.el.className=this.baseCls;if(ENV.transSupport){this.el.style.display=\"block\";setTimeout(ENV.bind(this._showMsg,this),50)}else{this._showMsg()}},_setOpacity:function(opacity){if(ENV.useFilter){try{this.el.filters.item(\"DXImageTransform.Microsoft.Alpha\").Opacity=opacity*100}catch(err){}}else{this.el.style.opacity=String(opacity)}},_showMsg:function(){var addnCls=ENV.config(this.currentMsg.addnCls,this.addnCls);if(ENV.transSupport){this.el.className=this.baseCls+\" \"+addnCls+\" \"+this.baseCls+\"-animate\"}else{var opacity=0;this.el.className=this.baseCls+\" \"+addnCls+\" \"+this.baseCls+\"-js-animate\";this._setOpacity(0);this.el.style.display=\"block\";var self=this;var interval=setInterval(function(){if(opacity<1){opacity+=.1;if(opacity>1)opacity=1;self._setOpacity(opacity)}else clearInterval(interval)},30)}},_hideMsg:function(){var addnCls=ENV.config(this.currentMsg.addnCls,this.addnCls);if(ENV.transSupport){this.el.className=this.baseCls+\" \"+addnCls;ENV.on(this.el,ENV.vendorPrefix?ENV.vendorPrefix+\"TransitionEnd\":\"transitionend\",this.transEvent)}else{var opacity=1;var self=this;var interval=setInterval(function(){if(opacity>0){opacity-=.1;if(opacity<0)opacity=0;self._setOpacity(opacity)}else{self.el.className=self.baseCls+\" \"+addnCls;clearInterval(interval);self._afterAnimation()}},30)}},_afterAnimation:function(){if(ENV.transSupport)ENV.off(this.el,ENV.vendorPrefix?ENV.vendorPrefix+\"TransitionEnd\":\"transitionend\",this.transEvent);if(this.currentMsg.cb)this.currentMsg.cb();this.el.style.display=\"none\";this._animating=false;this._run()},remove:function(e){var cb=typeof e==\"function\"?e:null;ENV.off(doc.body,\"mousemove\",this.removeEvent);ENV.off(doc.body,\"click\",this.removeEvent);ENV.off(doc.body,\"keypress\",this.removeEvent);ENV.off(doc.body,\"touchstart\",this.removeEvent);ENV.off(this.el,\"click\",this.removeEvent);ENV.off(this.el,\"touchstart\",this.removeEvent);this.removeEventsSet=false;if(cb&&this.currentMsg)this.currentMsg.cb=cb;if(this._animating)this._hideMsg();else if(cb)cb()},log:function(html,o,cb,defaults){var msg={};if(defaults)for(var opt in defaults)msg[opt]=defaults[opt];if(typeof o==\"function\")cb=o;else if(o)for(var opt in o)msg[opt]=o[opt];msg.html=html;if(cb)msg.cb=cb;this.queue.push(msg);this._run();return this},spawn:function(defaults){var self=this;return function(html,o,cb){self.log.call(self,html,o,cb,defaults);return self}},create:function(o){return new Humane(o)}};return new Humane});\n/* Riot v2.0.9, @license MIT, (c) 2015 Muut Inc. + contributors */\n(function(){var e={version:\"v2.0.9\",settings:{}};\"use strict\";e.observable=function(e){e=e||{};var t={},n=0;e.on=function(i,r){if(typeof r==\"function\"){r._id=n++;i.replace(/\\S+/g,function(e,n){(t[e]=t[e]||[]).push(r);r.typed=n>0})}return e};e.off=function(n,i){if(n==\"*\")t={};else if(i){var r=t[n];for(var o=0,u;u=r&&r[o];++o){if(u._id==i._id){r.splice(o,1);o--}}}else{n.replace(/\\S+/g,function(e){t[e]=[]})}return e};e.one=function(t,n){if(n)n.one=1;return e.on(t,n)};e.trigger=function(n){var i=[].slice.call(arguments,1),r=t[n]||[];for(var o=0,u;u=r[o];++o){if(!u.busy){u.busy=1;u.apply(e,u.typed?[n].concat(i):i);if(u.one){r.splice(o,1);o--}else if(r[o]!==u){o--}u.busy=0}}return e};return e};(function(e,t){if(!this.top)return;var n=location,i=e.observable(),r=window,o;function u(){return n.hash.slice(1)}function f(e){return e.split(\"/\")}function a(e){if(e.type)e=u();if(e!=o){i.trigger.apply(null,[\"H\"].concat(f(e)));o=e}}var c=e.route=function(e){if(e[0]){n.hash=e;a(e)}else{i.on(\"H\",e)}};c.exec=function(e){e.apply(null,f(u()))};c.parser=function(e){f=e};r.addEventListener?r.addEventListener(t,a,false):r.attachEvent(\"on\"+t,a)})(e,\"hashchange\");var t=function(){var t={},n,i,r=/(\"|').+?[^\\\\]\\1|\\.\\w*|\\w*:|\\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\\b|function *\\()|([a-z_]\\w*)/gi;return function(r,u){var f=e.settings.brackets||\"{ }\";if(f!=n){n=f.split(\" \");i=a(/({[\\s\\S]*?})/)}return u?r&&(t[r]=t[r]||o(r))(u):i.test(r)};function o(e,t){t=(e||n.join(\"\")).replace(a(/\\\\{/),\"￰\").replace(a(/\\\\}/),\"￱\").split(i);return new Function(\"d\",\"return \"+(!t[0]&&!t[2]&&!t[3]?u(t[1]):\"[\"+t.map(function(e,t){return t%2?u(e,1):'\"'+e.replace(/\\n/g,\"\\\\n\").replace(/\"/g,'\\\\\"')+'\"'}).join(\",\")+'].join(\"\")').replace(/\\uFFF0/g,n[0]).replace(/\\uFFF1/g,n[1]))}function u(e,t){e=e.replace(/\\n/g,\" \").replace(a(/^[{ ]+|[ }]+$|\\/\\*.+?\\*\\//g),\"\");return/^\\s*[\\w- \"']+ *:/.test(e)?\"[\"+e.replace(/\\W*([\\w- ]+)\\W*:([^,]+)/g,function(e,n,i){return i.replace(/\\w[^,|& ]*/g,function(e){return f(e,t)})+'?\"'+n.trim()+'\":\"\",'})+'].join(\" \")':f(e,t)}function f(e,t){return\"(function(v){try{v=\"+(e.replace(r,function(e,t,n){return n?\"(d.\"+n+\"===undefined?window.\"+n+\":d.\"+n+\")\":e})||\"x\")+\"}finally{return \"+(t?'!v&&v!==0?\"\":v':\"v\")+\"}}).call(d)\"}function a(e){return RegExp(e.source.split(\"{\").join(\"\\\\\"+n[0]).split(\"}\").join(\"\\\\\"+n[1]),e.global?\"g\":\"\")}}();function n(e){var t={val:e},n=e.split(/\\s+in\\s+/);if(n[1]){t.val=y+n[1];n=n[0].slice(y.length).trim().split(/,\\s*/);t.key=n[0];t.pos=n[1]}return t}function i(e,t,n){var i={};i[e.key]=t;if(e.pos)i[e.pos]=n;return i}function r(e,r,o){p(e,\"each\");var u=e.outerHTML,a=e.previousSibling,c=e.parentNode,l=[],s=[],d;o=n(o);r.one(\"update\",function(){c.removeChild(e)}).one(\"mount\",function(){if(c.stub)c=r.root}).on(\"update\",function(){var e=t(o.val,r);if(!e)return;if(!Array.isArray(e)){var n=JSON.stringify(e);if(n==d)return;d=n;s.map(function(e){e.unmount()});s=l=[];e=Object.keys(e).map(function(t){return i(o,t,e[t])})}h(l,e).map(function(e){var t=l.indexOf(e),n=s[t];if(n){n.unmount();l.splice(t,1);s.splice(t,1)}});var p=c.childNodes,v=[].indexOf.call(p,a);h(e,l).map(function(t,n){var a=e.indexOf(t);if(!d&&o.key)t=i(o,t,a);var l=new f({tmpl:u},{before:p[v+1+a],parent:r,root:c,loop:true,item:t});s.splice(a,0,l)});l=e.slice()})}function o(e,t,n){m(e,function(e){if(e.nodeType!=1)return;s(e.attributes,function(n){if(/^(name|id)$/.test(n.name))t[n.value]=e})})}function u(e,t,n){function i(e,t,i){if(t.indexOf(y)>=0){var r={dom:e,expr:t};n.push(d(r,i))}}m(e,function(e){var n=e.nodeType;if(n==3&&e.parentNode.tagName!=\"STYLE\")i(e,e.nodeValue);if(n!=1)return;var o=e.getAttribute(\"each\");if(o){r(e,t,o);return false}s(e.attributes,function(t){var n=t.name,r=t.value;var o=n.split(\"__\")[1];i(e,r,{attr:o||n,bool:o});if(o){p(e,n);return false}});var u=b[e.tagName.toLowerCase()];if(u)u=new f(u,{root:e,parent:t})})}function f(n,i){var r=e.observable(this),f=[],a={},c=i.parent,m=i.loop,h=i.root,g=i.opts,b=i.item;if(!m&&h.riot)return;h.riot=1;g=g||{};d(this,{parent:c,root:h,opts:g});d(this,b);s(h.attributes,function(e){var t=e.name,n=e.value;a[t]=n;if(n.indexOf(y)>=0){p(h,t);return false}});function w(){Object.keys(a).map(function(e){g[e]=t(a[e],c||r)})}w();var x=v(n.tmpl),j;o(x,this);this.update=function(e,t){d(r,e);d(r,b);r.trigger(\"update\");w();l(f,r,b);r.trigger(\"updated\")};this.unmount=function(){var e=m?j:h,t=e.parentNode;if(t){t.removeChild(e);r.trigger(\"unmount\");c&&c.off(\"update\",r.update)}};function C(){if(m){j=x.firstChild;h.insertBefore(j,i.before||null)}else{while(x.firstChild)h.appendChild(x.firstChild)}if(h.stub)r.root=h=c.root;r.trigger(\"mount\");c&&c.on(\"update\",r.update).one(\"unmount\",r.unmount)}if(n.fn)n.fn.call(this,g);u(x,this,f);this.update();C()}function a(e,t,n,i,r){n[e]=function(e){e=e||window.event;e.which=e.which||e.charCode||e.keyCode;e.target=e.target||e.srcElement;e.currentTarget=n;e.item=r;if(t.call(i,e)!==true){e.preventDefault&&e.preventDefault();e.returnValue=false}i.update()}}function c(e,t,n){if(e){e.insertBefore(n,t);e.removeChild(t)}}function l(e,n,i){s(e,function(e){var r=e.dom,o=e.attr,u=t(e.expr,n);if(u==null)u=\"\";if(e.value===u)return;e.value=u;if(!o)return r.nodeValue=u;if(!u&&e.bool||/obj|func/.test(typeof u))p(r,o);if(typeof u==\"function\"){a(o,u,r,n,i)}else if(o==\"if\"){p(r,o);var f=e.stub;if(u){f&&c(f.parentNode,f,r)}else{f=e.stub=f||document.createTextNode(\"\");c(r.parentNode,r,f)}}else if(/^(show|hide)$/.test(o)){p(r,o);if(o==\"hide\")u=!u;r.style.display=u?\"\":\"none\"}else if(o==\"value\"){r.value=u}else{if(e.bool){r[o]=u;if(!u)return;u=o}r.setAttribute(o,u)}})}function s(e,t){for(var n=0;n<(e||[]).length;n++){if(t(e[n],n)===false)n--}}function p(e,t){e.removeAttribute(t)}function d(e,t){t&&Object.keys(t).map(function(n){e[n]=t[n]});return e}function v(e){var t=e.trim().slice(1,3).toLowerCase(),n=/td|th/.test(t)?\"tr\":t==\"tr\"?\"tbody\":\"div\",i=document.createElement(n);i.stub=true;i.innerHTML=e;return i}function m(e,t){e=t(e)===false?e.nextSibling:e.firstChild;while(e){m(e,t);e=e.nextSibling}}function h(e,t){return e.filter(function(e){return t.indexOf(e)<0})}var g=[],b={},y;e.tag=function(t,n,i){y=y||(e.settings.brackets||\"{ }\").split(\" \")[0];b[t]={name:t,tmpl:n,fn:i}};var w=e.mountTo=function(e,t,n){var i=b[t],r;if(i&&e){e.riot=0;r=new f(i,{root:e,opts:n})}if(r){g.push(r);return r.on(\"unmount\",function(){g.splice(g.indexOf(r),1)})}};e.mount=function(e,t){if(e==\"*\")e=Object.keys(b).join(\", \");var n=[];s(document.querySelectorAll(e),function(e){var i=e.tagName.toLowerCase(),r=w(e,i,t);if(r)n.push(r)});return n};e.update=function(){g.map(function(e){e.update()});return g};if(typeof exports===\"object\")module.exports=e;else if(typeof define===\"function\"&&define.amd)define(function(){return e});else this.riot=e})();\n"],"sourceRoot":"/source/"}